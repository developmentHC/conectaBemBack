{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "ConectaBem APIs",
    "description": "APIs para o projeto ConectaBem"
  },
  "host": "localhost:3000",
  "basePath": "/",
  "tags": [
    {
      "name": "Authentication",
      "description": "Endpoints relacionados a autenticação do usuário"
    },
    {
      "name": "User",
      "description": "Endpoints relacionados ao usuário"
    },
    {
      "name": "Agendamentos",
      "description": "Endpoints relacionados a agendamentos de consultas"
    },
    {
      "name": "Interações",
      "description": "Endpoints relacionados às interações vinculadas aos agendamentos"
    },
    {
      "name": "Search",
      "description": "Endpoints relacionados a busca de dados"
    },
    {
      "name": "Test",
      "description": "Endpoints de teste"
    }
  ],
  "schemes": [
    "http"
  ],
  "paths": {
    "/auth/sendOTP": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Envia o código OTP para o e-mail enviado pelo body",
        "description": "Envia o código OTP para registro/login da conta no e-mail enviado no body",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuário já existente, código OTP enviado por e-mail"
          },
          "201": {
            "description": "Usuário criado com sucesso e código OTP enviado por e-mail"
          },
          "422": {
            "description": "Parâmetros exigidos não estão sendo enviados no body"
          },
          "500": {
            "description": "Erro no servidor"
          }
        }
      }
    },
    "/auth/checkOTP": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Checa se OTPs coincidem, e parte para o login/registro do usuário",
        "description": "Checa se o OTP enviado no body é o mesmo OTP encriptado no backend. Se for o mesmo, será checado se o usuário já está cadastrado no backend, se estiver, o usuário é logado, se não estiver, o usuário está liberado para o registro",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": {
                  "example": "any"
                },
                "OTP": {
                  "example": "any"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Còdigos OTP coincidem"
          },
          "401": {
            "description": "Códigos OTP não coincidem"
          },
          "404": {
            "description": "Não Encontrado"
          },
          "422": {
            "description": "Parâmetros exigidos não estão sendo enviados no body"
          },
          "500": {
            "description": "Erro no servidor"
          }
        }
      }
    },
    "/auth/createPatient": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Completa o cadastro do usuário paciente",
        "description": "",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "É necessário já ter feito o cadastro anterior do usuário nos endpoints de sendOTP e checkOTP para conseguir utilizar este endpoint",
            "schema": {
              "$ref": "#/definitions/AddUserPaciente"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuário encontardo, mas nenhuma alteração realizada no seu cadastro"
          },
          "201": {
            "description": "Usuário encontrado, cadastro completado com sucesso"
          },
          "400": {
            "description": "Solicitação Inválida"
          },
          "404": {
            "description": "Usuário não encontrado"
          },
          "422": {
            "description": "Parâmetros exigidos não estão sendo enviados no body"
          },
          "500": {
            "description": "Erro no servidor"
          }
        }
      }
    },
    "/auth/createProfessional": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Completa o cadastro do usuário profissional",
        "description": "",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "É necessário já ter feito o cadastro anterior do usuário nos endpoints de sendOTP e checkOTP para conseguir utilizar este endpoint",
            "schema": {
              "$ref": "#/definitions/AddUserProfessional"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuário encontardo, mas nenhuma alteração realizada no seu cadastro"
          },
          "201": {
            "description": "Usuário encontrado, cadastro completado com sucesso"
          },
          "400": {
            "description": "Solicitação Inválida"
          },
          "403": {
            "description": "Acesso Negado"
          },
          "404": {
            "description": "Usuário não encontrado"
          },
          "422": {
            "description": "Parâmetros exigidos não estão sendo enviados no body"
          },
          "500": {
            "description": "Erro no servidor"
          }
        }
      }
    },
    "/user": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Retorna todas as informações do usuário",
        "description": "",
        "responses": {
          "200": {
            "description": "Usuário encontrado, dados retornados"
          },
          "401": {
            "description": "Cookie não encontrado"
          },
          "500": {
            "description": "Bad request"
          }
        }
      }
    },
    "/appointments": {
      "post": {
        "tags": [
          "Agendamentos"
        ],
        "summary": "Cria um novo agendamento",
        "description": "Cria um agendamento entre o profissional autenticado e um paciente para uma data e hora específica.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "patient": {
                  "type": "string",
                  "example": "6657df0f2980adf19a8d9bd0"
                },
                "dateTime": {
                  "type": "string",
                  "example": "2025-06-20T14:00:00.000Z"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Agendamento criado com sucesso"
          },
          "400": {
            "description": "Patient e dateTime são obrigatórios"
          },
          "401": {
            "description": "Não autenticado"
          },
          "409": {
            "description": "Este horário já está agendado"
          },
          "500": {
            "description": "Erro no servidor"
          }
        }
      }
    },
    "/appointments/me": {
      "get": {
        "tags": [
          "Agendamentos"
        ],
        "summary": "Listar agendamentos do usuário autenticado",
        "description": "Retorna todos os agendamentos onde o usuário autenticado é paciente ou profissional.",
        "responses": {
          "200": {
            "description": "Lista de agendamentos retornada com sucesso"
          },
          "401": {
            "description": "Usuário não autenticado"
          },
          "500": {
            "description": "Erro interno no servidor"
          }
        }
      }
    },
    "/appointments/{id}": {
      "get": {
        "tags": [
          "Agendamentos"
        ],
        "summary": "Buscar detalhes de um agendamento",
        "description": "Retorna informações detalhadas de um agendamento específico, incluindo paciente, profissional, data e status.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "ID do agendamento"
          }
        ],
        "responses": {
          "200": {
            "description": "Agendamento retornado com sucesso."
          },
          "404": {
            "description": "Agendamento não encontrado."
          },
          "500": {
            "description": "Erro interno no servidor."
          }
        }
      },
      "delete": {
        "tags": [
          "Agendamentos"
        ],
        "summary": "Cancelar um agendamento",
        "description": "Atualiza o status de um agendamento para cancelado, desde que o profissional autenticado seja o responsável.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "ID do agendamento"
          }
        ],
        "responses": {
          "200": {
            "description": "Agendamento cancelado com sucesso."
          },
          "403": {
            "description": "Acesso negado."
          },
          "404": {
            "description": "Agendamento não encontrado."
          },
          "500": {
            "description": "Erro interno no servidor."
          }
        }
      }
    },
    "/interactions/{appointmentId}": {
      "get": {
        "tags": [
          "Interações"
        ],
        "summary": "Lista interações de um agendamento",
        "description": "Retorna todas as interações vinculadas a um agendamento específico.",
        "parameters": [
          {
            "name": "appointmentId",
            "in": "query",
            "required": true,
            "type": "string",
            "description": "ID do agendamento"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de interações retornada com sucesso."
          },
          "400": {
            "description": "appointmentId ausente."
          },
          "500": {
            "description": "Erro interno no servidor."
          }
        }
      }
    },
    "/interactions": {
      "post": {
        "tags": [
          "Interações"
        ],
        "summary": "Cria uma nova interação",
        "description": "Registra uma nova observação associada a um agendamento.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "appointment": {
                  "type": "string",
                  "example": "6852f8b1d59186c2f377c0dc"
                },
                "type": {
                  "type": "string",
                  "example": "observação"
                },
                "content": {
                  "type": "string",
                  "example": "Paciente relatou dores lombares após a sessão."
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Interação criada com sucesso."
          },
          "400": {
            "description": "Parâmetros obrigatórios ausentes."
          },
          "401": {
            "description": "Usuário não autenticado."
          },
          "500": {
            "description": "Erro interno no servidor."
          }
        }
      }
    },
    "/search/highlightsWeek": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Pesquisa os profissionais destaques da semana",
        "description": "",
        "responses": {
          "200": {
            "description": "Profissionais encontrados, retorna um range de 10 profissionais"
          },
          "400": {
            "description": "Solicitação Inválida"
          },
          "500": {
            "description": "Erro no servidor"
          }
        }
      }
    },
    "/search/professionalBySpeciality/{speciality}": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Pesquisa um range de 10 profissionais de uma especialidade específica",
        "description": "",
        "parameters": [
          {
            "name": "speciality",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Profissional encontrado, retorna um range de 10 profissionais"
          },
          "400": {
            "description": "Solicitação Inválida"
          },
          "500": {
            "description": "Erro no servidor"
          }
        }
      }
    },
    "/search/searchBar/{terms}": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Barra de pesquisa",
        "description": "",
        "parameters": [
          {
            "name": "terms",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Profissionais encontrados, retorna um range de 10 profissionais"
          },
          "400": {
            "description": "Solicitação Inválida"
          },
          "500": {
            "description": "Erro no servidor"
          }
        }
      }
    },
    "/teste": {
      "get": {
        "tags": [
          "Test"
        ],
        "summary": "Teste para verificar se API está funcionando",
        "description": "",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  },
  "definitions": {
    "AddUserPaciente": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "example": "63a8cdac35345692997edf32"
        },
        "name": {
          "type": "string",
          "example": "Thiago Cabral"
        },
        "birthdayDate": {
          "type": "number",
          "example": 1745940325251
        },
        "userSpecialties": {
          "type": "array",
          "example": [
            "Acumputura",
            "Aromaterapia"
          ],
          "items": {
            "type": "string"
          }
        },
        "userServicePreferences": {
          "type": "array",
          "example": [
            "LGBTQIA+ Friendly",
            "Pet Friendly"
          ],
          "items": {
            "type": "string"
          }
        },
        "userAcessibilityPreferences": {
          "type": "array",
          "example": [
            "Atendimento em Libras",
            "Audiodescrição"
          ],
          "items": {
            "type": "string"
          }
        },
        "profilePhoto": {
          "type": "string",
          "example": "base64"
        }
      },
      "required": [
        "userId",
        "name",
        "birthdayDate",
        "userSpecialties",
        "userServicePreferences"
      ]
    },
    "AddUserProfessional": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "example": "63a8cdac35345692997edf32"
        },
        "name": {
          "type": "string",
          "example": "Ronaldinho Gaúcho"
        },
        "birthdayDate": {
          "type": "number",
          "example": 1745940325251
        },
        "cepResidencial": {
          "type": "string",
          "example": "12345-678"
        },
        "nomeClinica": {
          "type": "string",
          "example": "Clinica do seu José"
        },
        "CNPJCPFProfissional": {
          "type": "string",
          "example": "123.456.789-10"
        },
        "cepClinica": {
          "type": "string",
          "example": "12345-678"
        },
        "enderecoClinica": {
          "type": "string",
          "example": "Rua Perto da Qui"
        },
        "complementoClinica": {
          "type": "string",
          "example": "Casa"
        },
        "professionalSpecialties": {
          "type": "array",
          "example": [
            "Acumputura",
            "Aromaterapia"
          ],
          "items": {
            "type": "string"
          }
        },
        "otherProfessionalSpecialties": {
          "type": "array",
          "example": [
            "Yoga na água",
            "Corrente russa"
          ],
          "items": {
            "type": "string"
          }
        },
        "professionalServicePreferences": {
          "type": "array",
          "example": [
            "LGBTQIA+ Friendly",
            "Pet Friendly"
          ],
          "items": {
            "type": "string"
          }
        },
        "profilePhoto": {
          "type": "string",
          "example": "base64"
        }
      },
      "required": [
        "userId",
        "name",
        "birthdayDate",
        "cepResidencial",
        "nomeClinica",
        "CNPJCPFProfissional",
        "cepClinica",
        "enderecoClinica",
        "professionalSpecialties",
        "professionalServicePreferences"
      ]
    }
  }
}